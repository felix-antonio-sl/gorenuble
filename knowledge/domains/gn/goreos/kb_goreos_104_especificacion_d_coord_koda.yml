# GOS-104: GORE_OS - Especificación D-COORD (Coordinación)
# ═══════════════════════════════════════════════════════════════════════════════

Manifest:
  URN: "urn:knowledge:gorenuble:goreos:104:especificacion:d_coord"
  Version: "1.0.0"
  Status: Draft

Metadata:
  Title: "GORE_OS - Especificación D-COORD (Coordinación)"
  Description: "Casos de uso, flujos y APIs del dominio Coordinación"
  Domain: GORE_OS
  Subdomain: D-COORD
  Created: "2024-12-14"
  Tags: [goreos, d_coord, compromisos, indicadores, gabinete]

# ═══════════════════════════════════════════════════════════════════════════════
# VISIÓN DEL DOMINIO
# ═══════════════════════════════════════════════════════════════════════════════

Vision_Dominio:
  Proposito: >
    Gestionar la coordinación interinstitucional: compromisos con otros organismos,
    indicadores regionales, gabinetes y articulación multinivel.
  
  Objetivos:
    - "Registrar y dar seguimiento a compromisos interinstitucionales"
    - "Monitorear indicadores de desarrollo regional"
    - "Gestionar sesiones de gabinete regional"
    - "Articular relación con servicios y municipios"
  
  Actores:
    - actor: "Jefe Gabinete"
      rol: "Gestiona compromisos y sesiones de gabinete"
    - actor: "Analista Coordinación"
      rol: "Seguimiento de compromisos e indicadores"
    - actor: "SEREMI"
      rol: "Responsable de compromisos sectoriales"
    - actor: "Alcalde"
      rol: "Responsable de compromisos municipales"
  
  KPIs:
    - nombre: "Cumplimiento compromisos"
      formula: "Compromisos cumplidos / Total vencidos * 100"
      meta: ">= 85%"
    - nombre: "Indicadores actualizados"
      formula: "Indicadores con dato del período / Total"
      meta: ">= 90%"

# ═══════════════════════════════════════════════════════════════════════════════
# CASOS DE USO
# ═══════════════════════════════════════════════════════════════════════════════

Casos_Uso:

  # ─────────────────────────────────────────────────────────────────────────────
  # COMPROMISOS INTERINSTITUCIONALES
  # ─────────────────────────────────────────────────────────────────────────────

  CU_COORD_001:
    nombre: "Registrar compromiso interinstitucional"
    actor_principal: "Jefe Gabinete"
    descripcion: "Crear nuevo compromiso con otro organismo"
    flujo_principal:
      1: "Usuario accede a módulo de compromisos"
      2: "Usuario ingresa datos del compromiso"
      3: "Usuario selecciona organismo contraparte"
      4: "Usuario define responsable GORE"
      5: "Usuario establece fecha compromiso"
      6: "Sistema crea compromiso en estado PENDIENTE"

  CU_COORD_002:
    nombre: "Actualizar avance de compromiso"
    actor_principal: "Analista Coordinación"
    descripcion: "Registrar progreso de un compromiso"
    flujo_principal:
      1: "Usuario selecciona compromiso"
      2: "Usuario registra avance (% o hito)"
      3: "Usuario adjunta evidencia si corresponde"
      4: "Sistema actualiza estado y avance"
      5: "Si 100%, sistema cambia a CUMPLIDO"

  CU_COORD_003:
    nombre: "Dashboard de compromisos"
    actor_principal: "Jefe Gabinete"
    descripcion: "Visualizar estado de compromisos"
    flujo_principal:
      1: "Usuario accede a dashboard"
      2: "Sistema muestra compromisos por estado"
      3: "Sistema alerta vencimientos próximos"
      4: "Usuario puede filtrar por organismo, responsable"

  # ─────────────────────────────────────────────────────────────────────────────
  # INDICADORES REGIONALES
  # ─────────────────────────────────────────────────────────────────────────────

  CU_COORD_010:
    nombre: "Gestionar indicadores regionales"
    actor_principal: "Analista Coordinación"
    descripcion: "CRUD de indicadores de desarrollo"
    flujo_principal:
      1: "Usuario accede a catálogo de indicadores"
      2: "Usuario crea/edita indicador"
      3: "Usuario define metadatos (fuente, frecuencia)"
      4: "Sistema guarda indicador"

  CU_COORD_011:
    nombre: "Registrar valor de indicador"
    actor_principal: "Analista Coordinación"
    descripcion: "Cargar nuevo valor para un período"
    flujo_principal:
      1: "Usuario selecciona indicador"
      2: "Usuario ingresa valor y período"
      3: "Sistema calcula variación vs anterior"
      4: "Sistema actualiza serie temporal"

  CU_COORD_012:
    nombre: "Tablero de indicadores"
    actor_principal: "Gobernador"
    descripcion: "Visualizar indicadores clave de la región"
    flujo_principal:
      1: "Usuario accede a tablero"
      2: "Sistema muestra indicadores por dimensión"
      3: "Sistema muestra tendencias"
      4: "Sistema compara con promedios nacionales"

  # ─────────────────────────────────────────────────────────────────────────────
  # GABINETE REGIONAL
  # ─────────────────────────────────────────────────────────────────────────────

  CU_COORD_020:
    nombre: "Programar sesión de gabinete"
    actor_principal: "Jefe Gabinete"
    descripcion: "Crear nueva sesión de gabinete regional"
    flujo_principal:
      1: "Usuario crea nueva sesión"
      2: "Usuario define fecha, hora, lugar"
      3: "Usuario define tabla (temas)"
      4: "Sistema genera convocatoria"
      5: "Sistema notifica a participantes"

  CU_COORD_021:
    nombre: "Registrar acuerdos de gabinete"
    actor_principal: "Jefe Gabinete"
    descripcion: "Documentar acuerdos de sesión realizada"
    flujo_principal:
      1: "Usuario selecciona sesión"
      2: "Usuario registra asistencia"
      3: "Usuario ingresa acuerdos tomados"
      4: "Usuario asigna responsables y plazos"
      5: "Sistema crea compromisos desde acuerdos"
      6: "Sistema genera acta"

  CU_COORD_022:
    nombre: "Seguimiento de acuerdos"
    actor_principal: "Analista Coordinación"
    descripcion: "Monitorear cumplimiento de acuerdos"
    flujo_principal:
      1: "Usuario accede a acuerdos pendientes"
      2: "Sistema muestra por sesión y responsable"
      3: "Usuario actualiza estado de cada acuerdo"

# ═══════════════════════════════════════════════════════════════════════════════
# API ENDPOINTS
# ═══════════════════════════════════════════════════════════════════════════════

API_Endpoints:

  Compromisos:
    base_path: "/api/v1/coord/compromisos"
    endpoints:
      - { method: GET, path: "/", desc: "Listar compromisos" }
      - { method: GET, path: "/{id}", desc: "Detalle compromiso" }
      - { method: POST, path: "/", desc: "Crear compromiso" }
      - { method: PUT, path: "/{id}", desc: "Actualizar compromiso" }
      - { method: POST, path: "/{id}/avance", desc: "Registrar avance" }
      - { method: GET, path: "/dashboard", desc: "Dashboard compromisos" }

  Indicadores:
    base_path: "/api/v1/coord/indicadores"
    endpoints:
      - { method: GET, path: "/", desc: "Catálogo indicadores" }
      - { method: GET, path: "/{id}/serie", desc: "Serie temporal" }
      - { method: POST, path: "/{id}/valores", desc: "Registrar valor" }
      - { method: GET, path: "/tablero", desc: "Tablero ejecutivo" }

  Gabinete:
    base_path: "/api/v1/coord/gabinete"
    endpoints:
      - { method: GET, path: "/sesiones", desc: "Listar sesiones" }
      - { method: POST, path: "/sesiones", desc: "Programar sesión" }
      - { method: GET, path: "/sesiones/{id}", desc: "Detalle sesión" }
      - { method: POST, path: "/sesiones/{id}/acuerdos", desc: "Registrar acuerdos" }
      - { method: GET, path: "/acuerdos/pendientes", desc: "Acuerdos pendientes" }

# ═══════════════════════════════════════════════════════════════════════════════
# EVENTOS
# ═══════════════════════════════════════════════════════════════════════════════

Eventos:
  - { evento: "CompromisoCreado", payload: [compromiso_id, organismo, plazo] }
  - { evento: "CompromisoPorVencer", payload: [compromiso_id, dias_restantes] }
  - { evento: "CompromisoCumplido", payload: [compromiso_id, fecha] }
  - { evento: "SesionGabineteProgramada", payload: [sesion_id, fecha] }
  - { evento: "AcuerdoGabineteCreado", payload: [acuerdo_id, sesion_id] }

# ═══════════════════════════════════════════════════════════════════════════════
# FIN ESPECIFICACIÓN D-COORD
# ═══════════════════════════════════════════════════════════════════════════════
